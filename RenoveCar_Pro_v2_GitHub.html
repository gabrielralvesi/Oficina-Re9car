
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RenoveCar Pro v2</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
body{
 font-family:'Inter',sans-serif;
 background:linear-gradient(135deg,#667eea,#764ba2);
 padding:20px;
 color:#222;
}

.container{
 background:white;
 border-radius:12px;
 padding:20px;
 max-width:1000px;
 margin:auto;
}

h1{margin-bottom:10px}

button{
 padding:10px 15px;
 border:none;
 border-radius:8px;
 cursor:pointer;
 background:#e63946;
 color:white;
 font-weight:600;
 margin:5px 0;
}

input,select{
 padding:8px;
 border-radius:6px;
 border:1px solid #ccc;
 width:100%;
 margin-bottom:10px;
}

.table{
 width:100%;
 border-collapse:collapse;
 margin-top:15px;
}

.table th,.table td{
 border-bottom:1px solid #eee;
 padding:8px;
 text-align:left;
}

.print-area{
 display:none;
}

@media print{
 body *{visibility:hidden}
 .print-area,.print-area *{visibility:visible}
 .print-area{
   position:absolute;
   left:0;
   top:0;
   width:100%;
   display:block;
 }
}
</style>
</head>

<body>

<div class="container">
<h1><i class="fas fa-car"></i> RenoveCar Pro v2</h1>

<h3>Nova Ordem de Serviço</h3>

<label>Cliente</label>
<input id="cliente">

<label>Veículo</label>
<input id="veiculo">

<label>Placa</label>
<input id="placa">

<label>Descrição do Serviço</label>
<input id="descricao">

<label>Valor</label>
<input id="valor" type="number" step="0.01">

<label>Forma de Pagamento</label>
<select id="pagamento">
<option>Pix</option>
<option>Dinheiro</option>
<option>Cartão</option>
<option>Transferência</option>
<option>Boleto</option>
</select>

<button onclick="salvarOS()">Salvar OS</button>
<button onclick="exportarBackup()">Exportar Backup</button>
<input type="file" onchange="importarBackup(event)">

<table class="table">
<thead>
<tr>
<th>Nº</th>
<th>Cliente</th>
<th>Veículo</th>
<th>Valor</th>
<th>Pagamento</th>
<th>Ação</th>
</tr>
</thead>
<tbody id="lista"></tbody>
</table>

</div>

<div class="print-area" id="printArea"></div>

<script>

const App={
 data: JSON.parse(localStorage.getItem("renovecar_v2")) || {os:[],seq:1}
}

function save(){
 localStorage.setItem("renovecar_v2",JSON.stringify(App.data))
}

function gerarNumero(){
 const ano=new Date().getFullYear()
 const numero=String(App.data.seq).padStart(3,"0")
 App.data.seq++
 return `OS-${ano}-${numero}`
}

function salvarOS(){

 const nova={
   numero:gerarNumero(),
   cliente:cliente.value,
   veiculo:veiculo.value,
   placa:placa.value,
   descricao:descricao.value,
   valor:parseFloat(valor.value)||0,
   pagamento:pagamento.value,
   data:new Date().toLocaleDateString("pt-BR")
 }

 if(!nova.cliente||!nova.descricao){
   alert("Preencha os campos obrigatórios")
   return
 }

 App.data.os.unshift(nova)
 save()
 render()
 limpar()
}

function limpar(){
 cliente.value=""
 veiculo.value=""
 placa.value=""
 descricao.value=""
 valor.value=""
}

function render(){
 lista.innerHTML=App.data.os.map(os=>`
<tr>
<td>${os.numero}</td>
<td>${os.cliente}</td>
<td>${os.veiculo}</td>
<td>R$ ${os.valor.toFixed(2)}</td>
<td>${os.pagamento}</td>
<td>
<button onclick='imprimir(${JSON.stringify(os)})'>Imprimir</button>
</td>
</tr>
`).join("")
}

function imprimir(os){
 printArea.innerHTML=`
 <h2>Ordem de Serviço</h2>
 <p><b>Número:</b> ${os.numero}</p>
 <p><b>Cliente:</b> ${os.cliente}</p>
 <p><b>Veículo:</b> ${os.veiculo}</p>
 <p><b>Placa:</b> ${os.placa}</p>
 <p><b>Serviço:</b> ${os.descricao}</p>
 <p><b>Valor:</b> R$ ${os.valor.toFixed(2)}</p>
 <p><b>Pagamento:</b> ${os.pagamento}</p>
 <p><b>Data:</b> ${os.data}</p>
 `
 window.print()
}

function exportarBackup(){
 const blob=new Blob([JSON.stringify(App.data)],{type:"application/json"})
 const a=document.createElement("a")
 a.href=URL.createObjectURL(blob)
 a.download="backup_renovecar.json"
 a.click()
}

function importarBackup(e){
 const file=e.target.files[0]
 const reader=new FileReader()
 reader.onload=function(){
   App.data=JSON.parse(reader.result)
   save()
   render()
 }
 reader.readAsText(file)
}

render()

</script>
</body>
</html>
